# 实验目录分级管理与智能预约系统 - 功能测试清单

## 📋 测试环境准备

### 前置条件
- ✅ 前端服务已启动：http://localhost:3000
- ✅ 后端服务已启动
- ✅ 数据库连接正常
- ✅ 测试账号可用

### 测试账号
- **省级管理员**: `province_admin_test` / `password`
- **市级管理员**: `city_admin_test` / `password`  
- **区县管理员**: `county_admin_test` / `password`
- **学校管理员**: `school_admin_test` / `password`
- **实验教师**: `school_teacher` / `password`

---

## 🏗️ 一、教材版本管理功能测试

### 测试路径
访问：基础数据 → 📚 教材版本管理
或直接访问：http://localhost:3000/textbook-versions

### 1.1 页面加载测试
- [ ] 页面正常加载，显示"教材版本管理"标题
- [ ] 搜索筛选区域正常显示
- [ ] 工具栏按钮正常显示（新增版本、刷新）
- [ ] 数据表格正常显示
- [ ] 分页组件正常显示

### 1.2 数据列表测试
- [ ] 表格显示版本列表数据
- [ ] 排序功能：点击"排序"列标题，数据重新排序
- [ ] 排序功能：点击"版本名称"列标题，数据重新排序
- [ ] 排序功能：点击"版本代码"列标题，数据重新排序
- [ ] 排序功能：点击"创建时间"列标题，数据重新排序

### 1.3 搜索筛选测试
- [ ] 关键词搜索：输入"人教"，点击搜索，显示相关结果
- [ ] 关键词搜索：输入"PEP"，点击搜索，显示相关结果
- [ ] 状态筛选：选择"启用"，显示启用状态的版本
- [ ] 状态筛选：选择"禁用"，显示禁用状态的版本
- [ ] 重置功能：点击"重置"按钮，清空搜索条件
- [ ] 实时搜索：在搜索框输入内容，等待300ms后自动搜索

### 1.4 新增版本测试
- [ ] 点击"新增版本"按钮，弹出对话框
- [ ] 对话框标题显示"新增教材版本"
- [ ] 表单字段完整：版本名称、版本代码、出版社、排序、状态、描述
- [ ] 必填验证：版本名称为空时，显示验证错误
- [ ] 必填验证：版本代码为空时，显示验证错误
- [ ] 格式验证：版本代码输入小写字母，显示格式错误
- [ ] 长度验证：版本名称超过50字符，显示长度错误
- [ ] 成功创建：填写正确信息，点击"创建"，显示成功提示
- [ ] 列表更新：创建成功后，列表自动刷新显示新数据

### 1.5 编辑版本测试
- [ ] 点击某行的"编辑"按钮，弹出编辑对话框
- [ ] 对话框标题显示"编辑教材版本"
- [ ] 表单预填充：显示当前版本的所有信息
- [ ] 修改信息：更改版本名称，点击"更新"
- [ ] 成功更新：显示"更新成功"提示
- [ ] 列表更新：编辑成功后，列表显示更新后的数据

### 1.6 删除版本测试
- [ ] 点击某行的"删除"按钮，弹出确认对话框
- [ ] 确认对话框显示版本名称
- [ ] 取消删除：点击"取消"，对话框关闭，数据不变
- [ ] 确认删除：点击"确定"，显示"删除成功"提示
- [ ] 列表更新：删除成功后，该条数据从列表中移除

### 1.7 分页测试
- [ ] 分页信息显示：显示总数、当前页等信息
- [ ] 页面跳转：点击页码，跳转到对应页面
- [ ] 页面大小：更改每页显示条数，列表重新加载
- [ ] 上一页/下一页：按钮状态正确，功能正常

---

## 📚 二、章节结构管理功能测试

### 测试路径
访问：基础数据 → 📖 章节结构管理
或直接访问：http://localhost:3000/textbook-chapters

### 2.1 页面加载测试
- [ ] 页面正常加载，显示"章节结构管理"标题
- [ ] 筛选条件区域正常显示（学科、教材版本、年级、册次）
- [ ] 工具栏按钮正常显示（新增章节、展开全部、收起全部、刷新）
- [ ] 章节树区域正常显示

### 2.2 筛选条件测试
- [ ] 学科选择：下拉框显示学科列表
- [ ] 学科选择：选择"物理"，教材版本和章节数据联动更新
- [ ] 教材版本选择：选择版本后，章节数据更新
- [ ] 年级选择：选择年级后，章节数据更新
- [ ] 册次选择：选择册次后，章节数据更新
- [ ] 查询按钮：点击查询，根据条件加载章节数据
- [ ] 重置按钮：点击重置，清空所有筛选条件

### 2.3 章节树显示测试
- [ ] 树形结构：章节以树形结构显示
- [ ] 层级显示：不同层级的章节有不同的缩进
- [ ] 章节信息：显示章节编码、名称、层级标签
- [ ] 状态标签：显示章节的启用/禁用状态
- [ ] 展开收起：点击节点前的箭头，展开/收起子章节

### 2.4 章节操作测试
- [ ] 展开全部：点击"展开全部"，所有章节节点展开
- [ ] 收起全部：点击"收起全部"，所有章节节点收起
- [ ] 悬停效果：鼠标悬停在章节上，显示操作按钮
- [ ] 操作按钮：显示"添加子章节"、"编辑"、"删除"按钮

### 2.5 新增章节测试
- [ ] 新增根章节：点击"新增章节"，弹出新增对话框
- [ ] 对话框预填充：学科、版本、年级、册次自动填充
- [ ] 层级设置：根章节层级默认为1
- [ ] 添加子章节：点击某章节的"添加子章节"，层级自动+1
- [ ] 表单验证：必填字段验证正常
- [ ] 编码验证：章节编码格式验证正常
- [ ] 成功创建：创建成功后，树形结构自动更新

### 2.6 编辑章节测试
- [ ] 点击"编辑"按钮，弹出编辑对话框
- [ ] 表单预填充：显示当前章节的所有信息
- [ ] 父级章节：如果有父级，显示父级章节名称
- [ ] 层级限制：层级字段在有父级时不可编辑
- [ ] 成功更新：更新成功后，树形结构显示新数据

### 2.7 删除章节测试
- [ ] 点击"删除"按钮，弹出确认对话框
- [ ] 警告信息：提示删除后子章节也将被删除
- [ ] 确认删除：删除成功后，该章节及其子章节从树中移除

---

## 📖 三、实验目录管理功能测试

### 测试路径
访问：实验管理 → 实验目录管理

### 3.1 页面加载测试
- [ ] 页面正常加载，显示"实验目录管理"标题
- [ ] 搜索筛选区域显示完整（管理级别、学科、教材版本、年级、册次、章节、实验类型、关键词）
- [ ] 工具栏按钮正常显示
- [ ] 数据表格正常显示新的列结构

### 3.2 筛选功能测试
- [ ] 管理级别筛选：选择不同级别，显示对应数据
- [ ] 学科筛选：选择学科后，版本和章节联动更新
- [ ] 教材版本筛选：选择版本后，章节数据更新
- [ ] 年级筛选：选择年级，数据筛选正常
- [ ] 册次筛选：选择册次，数据筛选正常
- [ ] 章节筛选：章节下拉框显示层级结构
- [ ] 实验类型筛选：选择类型（必做、选做、演示、分组）
- [ ] 关键词搜索：输入实验名称或编号搜索

### 3.3 表格显示测试
- [ ] 级别列：显示管理级别标签（省级、市级等）
- [ ] 实验编号列：显示实验编号
- [ ] 实验名称列：显示实验名称
- [ ] 学科列：显示学科名称
- [ ] 教材版本列：显示版本名称
- [ ] 年级列：显示年级信息
- [ ] 册次列：显示册次信息
- [ ] 章节列：显示章节编码和名称
- [ ] 实验类型列：显示类型标签
- [ ] 版本列：显示版本号（v1、v2等）
- [ ] 删除状态列：显示是否被下级删除
- [ ] 状态列：显示启用/禁用状态

### 3.4 权限控制测试

#### 3.4.1 使用学校管理员账号测试
- [ ] 登录：使用`school_admin_test`账号登录
- [ ] 查看权限：能看到所有级别的实验目录
- [ ] 编辑权限：只能编辑学校级（自己创建的）实验目录
- [ ] 删除权限：能删除自己创建的，能标记删除上级的
- [ ] 复制权限：能复制上级的实验目录
- [ ] 新增权限：能新增学校级实验目录

#### 3.4.2 使用市级管理员账号测试
- [ ] 登录：使用`city_admin_test`账号登录
- [ ] 查看权限：能看到省级和市级实验目录
- [ ] 编辑权限：只能编辑市级（自己创建的）实验目录
- [ ] 删除权限：能删除自己创建的，能标记删除省级的
- [ ] 复制权限：能复制省级的实验目录

### 3.5 操作按钮测试
- [ ] 详情按钮：所有用户都能看到
- [ ] 编辑按钮：只有有编辑权限的用户能看到
- [ ] 复制按钮：只有有复制权限的用户能看到
- [ ] 删除按钮：只有有删除权限的用户能看到
- [ ] 恢复按钮：只有被下级删除的自己创建的实验目录才显示

---

## 🧪 四、章节选择组件测试

### 测试路径
在实验目录管理或智能预约页面中测试

### 4.1 显示模式测试
- [ ] 树形模式：组件以树形结构显示章节
- [ ] 下拉模式：组件以下拉选择框显示章节
- [ ] 模式切换：如果支持，测试两种模式的切换

### 4.2 筛选功能测试
- [ ] 学科筛选：选择学科后，版本列表更新
- [ ] 版本筛选：选择版本后，章节数据更新
- [ ] 年级筛选：选择年级，章节数据筛选
- [ ] 册次筛选：选择册次，章节数据筛选
- [ ] 联动更新：筛选条件变化时，章节数据实时更新

### 4.3 选择功能测试
- [ ] 单选模式：点击章节，选中该章节
- [ ] 多选模式：如果支持，测试多选功能
- [ ] 选择反馈：选择后，父组件能接收到选择的章节信息
- [ ] 清空选择：清空按钮功能正常

### 4.4 数据加载测试
- [ ] 初始加载：组件初始化时正确加载基础数据
- [ ] 条件加载：筛选条件变化时，正确加载对应数据
- [ ] 加载状态：数据加载时显示加载状态
- [ ] 空数据处理：无数据时显示空状态提示

---

## ⚗️ 五、器材配置组件测试

### 测试路径
在实验目录管理的详情页面或智能预约页面中测试

### 5.1 界面显示测试
- [ ] 组件标题：显示"器材需求配置"
- [ ] 操作按钮：显示"继承上级配置"、"添加器材"按钮
- [ ] 器材列表：以表格形式显示器材需求
- [ ] 空状态：无器材时显示空状态提示

### 5.2 器材列表测试
- [ ] 器材信息：显示器材名称、分类、规格型号、单位
- [ ] 数量输入：可以修改需求数量
- [ ] 使用类型：可以选择必需、可选、替代
- [ ] 备注信息：可以输入备注信息
- [ ] 继承标识：继承的器材显示"继承"标签
- [ ] 操作按钮：显示删除按钮

### 5.3 添加器材测试
- [ ] 点击"添加器材"，弹出器材选择对话框
- [ ] 器材搜索：可以按分类和关键词搜索器材
- [ ] 器材列表：显示可选择的器材列表
- [ ] 多选功能：可以选择多个器材
- [ ] 确认添加：选择器材后，添加到需求列表
- [ ] 重复检查：已添加的器材不能重复添加

### 5.4 继承配置测试
- [ ] 继承按钮：有上级配置时显示"继承上级配置"按钮
- [ ] 继承确认：点击继承，弹出确认对话框
- [ ] 继承执行：确认后，上级的器材配置复制到当前配置
- [ ] 继承标识：继承的器材显示"继承"标签

### 5.5 智能计算测试
- [ ] 计算按钮：显示"智能计算"按钮
- [ ] 计算条件：需要先选择实验和输入学生人数
- [ ] 计算执行：根据实验类型和学生人数智能计算器材需求
- [ ] 计算结果：计算后的器材显示"智能"标签
- [ ] 计算逻辑：
  - 分组实验：按组计算（每组4人）
  - 演示实验：固定数量
  - 其他类型：按人数比例计算

---

## 🎯 六、智能预约界面测试

### 测试路径
访问：实验管理 → 智能预约

### 6.1 页面加载测试
- [x] 页面正常加载，显示"智能实验预约"标题
- [x] 实验目录筛选区域正常显示
- [x] 预约表单区域正常显示
- [x] 器材需求配置区域正常显示
- [x] 调试信息已清理，页面显示干净

### 6.2 实验目录筛选测试
- [x] 筛选标题：显示"实验目录筛选"
- [x] 筛选字段：学科、教材版本、年级、册次、章节、实验类型
- [x] 数据联动：学科选择后，版本和章节数据联动更新
- [x] 实验列表：筛选后，实验名称下拉框显示符合条件的实验
- [x] 实验信息：实验选项显示名称、类型、版本、章节等标签

### 6.3 预约表单测试
- [ ] 实验选择：从筛选后的实验中选择
- [ ] 基本信息：实验室、预约时间、学生人数等字段
- [ ] 表单验证：必填字段验证正常
- [ ] 冲突检查：选择时间后，检查是否有冲突

### 6.4 器材需求配置测试
- [ ] 自动加载：选择实验后，自动加载该实验的器材需求
- [ ] 继承配置：如果实验有上级配置，显示继承按钮
- [ ] 智能计算：输入学生人数后，可以智能计算器材需求
- [ ] 手动调整：可以手动调整器材数量和使用类型
- [ ] 需求统计：显示总器材数、必需器材数、缺少器材数等统计

### 6.5 器材需求统计测试
- [ ] 统计卡片：显示总器材数、必需器材、缺少器材、可预约状态
- [ ] 数据准确：统计数据与器材列表一致
- [ ] 状态判断：有必需器材缺少时，显示"不可预约"
- [ ] 实时更新：器材需求变化时，统计数据实时更新

### 6.6 预约提交测试
- [ ] 提交按钮：所有信息填写完整后，提交按钮可用
- [ ] 提交验证：提交前进行完整性验证
- [ ] 提交成功：提交成功后显示成功提示
- [ ] 数据保存：预约信息和器材需求正确保存

---

## 🔒 七、权限控制综合测试

### 7.1 不同角色权限测试

#### 省级管理员权限测试
- [ ] 登录：使用`province_admin_test`登录
- [ ] 教材版本：可以创建、编辑、删除所有教材版本
- [ ] 章节结构：可以创建、编辑、删除所有章节结构
- [ ] 实验目录：可以创建、编辑、删除省级实验目录
- [ ] 查看范围：只能查看省级实验目录

#### 市级管理员权限测试
- [ ] 登录：使用`city_admin_test`登录
- [ ] 查看权限：可以查看省级和市级实验目录
- [ ] 编辑权限：只能编辑市级（自己创建的）实验目录
- [ ] 复制权限：可以复制省级实验目录
- [ ] 删除权限：可以标记删除省级实验目录

#### 学校管理员权限测试
- [ ] 登录：使用`school_admin_test`登录
- [ ] 查看权限：可以查看所有级别的实验目录
- [ ] 编辑权限：只能编辑学校级（自己创建的）实验目录
- [ ] 复制权限：可以复制上级的实验目录
- [ ] 继承权限：可以继承上级的器材配置

#### 教师权限测试
- [ ] 登录：使用`school_teacher`登录
- [ ] 查看权限：可以查看所有实验目录
- [ ] 预约权限：可以进行实验预约
- [ ] 编辑限制：不能编辑实验目录
- [ ] 器材权限：可以查看和使用器材配置

### 7.2 权限边界测试
- [ ] 无权限操作：尝试无权限的操作，显示权限错误提示
- [ ] 按钮隐藏：无权限的操作按钮不显示或显示为禁用状态
- [ ] URL直接访问：直接访问无权限的URL，正确跳转或显示错误
- [ ] 数据过滤：列表数据按权限正确过滤

---

## ⚡ 八、性能和用户体验测试

### 8.1 性能测试
- [ ] 页面加载：各页面加载时间在可接受范围内（<2秒）
- [ ] 搜索响应：搜索操作响应及时（防抖生效）
- [ ] 数据加载：大量数据加载流畅
- [ ] 内存使用：长时间使用无明显内存泄漏

### 8.2 用户体验测试
- [ ] 加载状态：所有异步操作都有加载状态提示
- [ ] 错误提示：操作失败时有友好的错误提示
- [ ] 成功反馈：操作成功时有明确的成功提示
- [ ] 确认对话框：危险操作有确认对话框
- [ ] 表单验证：表单验证提示清晰准确

### 8.3 响应式测试
- [ ] 桌面端：在1920x1080分辨率下显示正常
- [ ] 笔记本：在1366x768分辨率下显示正常
- [ ] 平板：在平板尺寸下显示正常（如果支持）
- [ ] 浏览器兼容：在Chrome、Firefox、Edge中显示正常

---

## 📝 测试记录表

### 测试信息
- **测试人员**：_____________
- **测试时间**：_____________
- **测试环境**：_____________
- **浏览器版本**：_____________

### 测试结果统计
- **总测试项**：约200项
- **通过项数**：_____________
- **失败项数**：_____________
- **通过率**：_____________%

### 问题记录
| 序号 | 测试项目 | 问题描述 | 严重程度 | 状态 |
|------|----------|----------|----------|------|
| 1    |          |          |          |      |
| 2    |          |          |          |      |
| 3    |          |          |          |      |

### 测试总结
- **整体评价**：_____________
- **主要问题**：_____________
- **改进建议**：_____________

---

## 🎯 测试完成标准

### 功能完整性
- [ ] 所有核心功能测试通过率 ≥ 95%
- [ ] 所有权限控制测试通过
- [ ] 所有数据联动测试通过

### 性能表现
- [ ] 页面加载时间 < 2秒
- [ ] 搜索响应时间 < 500ms
- [ ] 无明显性能问题

### 用户体验
- [ ] 所有操作都有适当的反馈
- [ ] 错误处理友好完善
- [ ] 界面交互流畅自然

**测试完成后，请将测试结果反馈给开发团队，以便进行问题修复和优化改进。**
