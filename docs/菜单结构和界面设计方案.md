# 学校实验目录管理菜单结构和界面设计方案

## 一、菜单结构设计

### 1.1 推荐方案：独立菜单结构

基于功能复杂性和用户体验考虑，建议采用**独立菜单**的方式：

```
实验管理
├── 实验目录管理                 (现有功能 - 制定标准目录)
├── 学校目录配置                 (新增功能 - 学校目录管理)
│   ├── 我的目录配置             (学校查看/配置自己的目录)
│   ├── 下级目录指定             (上级管理员指定下级目录)
│   └── 完成率统计               (基于选定目录的统计分析)
├── 实验预约管理                 (现有功能)
└── 其他实验功能...
```

### 1.2 菜单权限控制

```typescript
// 菜单显示权限配置
const menuConfig = {
  // 学校目录配置主菜单
  'school-catalog-config': {
    title: '学校目录配置',
    icon: 'Setting',
    permissions: [
      'school_experiment_catalog.view',
      'school_experiment_catalog.config', 
      'school_experiment_catalog.assign'
    ],
    children: [
      {
        path: 'my-catalog-config',
        title: '我的目录配置',
        permissions: ['school_experiment_catalog.view', 'school_experiment_catalog.config'],
        visible: (user) => user.organization_level >= 5 || user.organization_level <= 3
      },
      {
        path: 'subordinate-assignment',
        title: '下级目录指定', 
        permissions: ['school_experiment_catalog.assign'],
        visible: (user) => user.organization_level <= 3
      },
      {
        path: 'completion-statistics',
        title: '完成率统计',
        permissions: ['school_experiment_catalog.completion_stats'],
        visible: (user) => true
      }
    ]
  }
}
```

## 二、界面布局设计

### 2.1 我的目录配置界面 (MyCatalogConfig.vue)

**适用用户**：学校管理员、上级管理员查看特定学校

**界面结构**：
```
┌─────────────────────────────────────────────────────────────┐
│ 📋 我的目录配置                                              │
├─────────────────────────────────────────────────────────────┤
│ 🏫 学校信息卡片                                              │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 学校名称: XX小学    管理级别: 区县直管    所属区县: XX区  │ │
│ │ 配置状态: ✅已配置   生效时间: 2024-01-01              │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ ⚙️ 当前配置信息                                              │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 配置类型: 上级指定 / 学校选择                            │ │
│ │ 目录来源: 石家庄市教育局 (市级)                          │ │
│ │ 删除权限: ✅允许删除实验项目                             │ │
│ │ 配置时间: 2024-01-01 10:00                              │ │
│ │ 配置理由: 根据学校实际情况选择市级标准...                │ │
│ │                                                         │ │
│ │ [修改配置] [查看详情] [导出配置]                         │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ 📊 目录统计概览                                              │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 总实验数: 120  必做: 80  选做: 25  演示: 15            │ │
│ │ 已完成: 96   完成率: 80%                               │ │
│ │                                                         │ │
│ │ 按学科分布: 科学(60) 物理(30) 化学(30)                 │ │
│ │ 按年级分布: 一年级(20) 二年级(20) ... 六年级(20)       │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ 📋 可用实验目录列表                                          │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 🔍 筛选: [学科▼] [年级▼] [学期▼] [实验类型▼] [搜索框]    │ │
│ │                                                         │ │
│ │ 📊 统计: 共120项实验，已完成96项，完成率80%              │ │
│ │                                                         │ │
│ │ 📋 实验列表表格                                          │ │
│ │ ┌─────┬──────────┬────┬────┬────┬────┬────────┐        │ │
│ │ │序号 │实验名称   │学科│年级│学期│类型│完成状态│操作    │ │
│ │ ├─────┼──────────┼────┼────┼────┼────┼────────┤        │ │
│ │ │001  │观察植物   │科学│一  │上  │必做│✅已完成│查看详情│ │
│ │ │002  │测量长度   │科学│一  │上  │必做│❌未完成│标记完成│ │
│ │ │...  │...       │... │... │... │... │...    │...    │ │
│ │ └─────┴──────────┴────┴────┴────┴────┴────────┘        │ │
│ │                                                         │ │
│ │ [批量操作▼] [导出列表] [刷新数据]                        │ │
│ └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 2.2 下级目录指定界面 (SubordinateAssignment.vue)

**适用用户**：省/市/区县级管理员

**界面结构**：
```
┌─────────────────────────────────────────────────────────────┐
│ 🎯 下级目录指定管理                                          │
├─────────────────────────────────────────────────────────────┤
│ 🔍 学校筛选                                                  │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 管理级别: [省直▼] [市直▼] [区县直管▼] [学区▼]            │ │
│ │ 所属区域: [河北省▼] [石家庄市▼] [长安区▼]                │ │
│ │ 学校名称: [搜索框]                                       │ │
│ │ 配置状态: [全部▼] [已配置▼] [未配置▼]                    │ │
│ │                                                         │ │
│ │ [查询] [重置] [批量指定]                                 │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ 📋 学校列表                                                  │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 📊 统计: 共50所学校，已配置35所，未配置15所              │ │
│ │                                                         │ │
│ │ 🏫 学校列表表格                                          │ │
│ │ ┌────┬──────────┬────────┬────────┬────────┬──────────┐ │ │
│ │ │选择│学校名称   │管理级别│所属区域│配置状态│操作      │ │ │
│ │ ├────┼──────────┼────────┼────────┼────────┼──────────┤ │ │
│ │ │☐  │XX小学     │区县直管│长安区  │✅已配置│查看|修改 │ │ │
│ │ │☐  │YY中学     │学区    │长安区  │❌未配置│立即配置  │ │ │
│ │ │...│...       │...     │...     │...     │...      │ │ │
│ │ └────┴──────────┴────────┴────────┴────────┴──────────┘ │ │
│ │                                                         │ │
│ │ [全选] [批量指定] [导出列表] [刷新]                       │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ ⚙️ 批量指定配置                                              │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 目标学校: 已选择 3 所学校                                │ │
│ │ 目录级别: [省级▼] [市级▼] [区县级▼]                      │ │
│ │ 目录来源: [石家庄市教育局▼]                              │ │
│ │ 删除权限: ☐ 允许学校删除实验项目                         │ │
│ │ 指定理由: [文本框]                                       │ │
│ │                                                         │ │
│ │ [确认指定] [取消]                                        │ │
│ └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 2.3 完成率统计界面 (CompletionStatistics.vue)

**适用用户**：所有有权限的用户

**界面结构**：
```
┌─────────────────────────────────────────────────────────────┐
│ 📊 实验完成率统计分析                                        │
├─────────────────────────────────────────────────────────────┤
│ 🔍 统计条件                                                  │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 统计范围: [我的学校▼] [下级学校▼] [指定学校▼]            │ │
│ │ 时间范围: [本学期▼] [本学年▼] [自定义▼]                  │ │
│ │ 学科筛选: [全部▼] [科学▼] [物理▼] [化学▼]                │ │
│ │ 年级筛选: [全部▼] [一年级▼] ... [六年级▼]                │ │
│ │                                                         │ │
│ │ [生成报告] [导出数据] [刷新]                             │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ 📈 统计图表                                                  │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 📊 总体完成率: 78.5%                                     │ │
│ │                                                         │ │
│ │ 📈 完成率趋势图 (按月份)                                 │ │
│ │ ┌─────────────────────────────────────────────────────┐ │ │
│ │ │     ▲                                               │ │ │
│ │ │ 100%│     ●─●─●                                     │ │ │
│ │ │  80%│   ●─●     ●─●                                 │ │ │
│ │ │  60%│ ●─●         ●─●                               │ │ │
│ │ │  40%│●             ●                                │ │ │
│ │ │   0%└─────────────────────────────────────────────▶ │ │ │
│ │ │     9月 10月 11月 12月 1月 2月 3月 4月 5月 6月      │ │ │
│ │ └─────────────────────────────────────────────────────┘ │ │
│ │                                                         │ │
│ │ 📊 分类完成率 (饼图/柱状图)                              │ │
│ │ ┌─────────────┬─────────────┬─────────────┬───────────┐ │ │
│ │ │按学科统计   │按年级统计   │按实验类型   │按学期统计 │ │ │
│ │ │科学: 85%    │一年级: 90%  │必做: 82%    │上学期: 80%│ │ │
│ │ │物理: 75%    │二年级: 88%  │选做: 65%    │下学期: 77%│ │ │
│ │ │化学: 70%    │...         │演示: 95%    │           │ │ │
│ │ └─────────────┴─────────────┴─────────────┴───────────┘ │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ 📋 详细数据表                                                │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 🏫 学校完成率排行                                        │ │
│ │ ┌────┬──────────┬────────┬────────┬────────┬──────────┐ │ │
│ │ │排名│学校名称   │总实验数│已完成数│完成率  │最后更新  │ │ │
│ │ ├────┼──────────┼────────┼────────┼────────┼──────────┤ │ │
│ │ │1   │AA小学     │120     │108     │90.0%   │今天      │ │ │
│ │ │2   │BB中学     │115     │98      │85.2%   │昨天      │ │ │
│ │ │... │...       │...     │...     │...     │...      │ │ │
│ │ └────┴──────────┴────────┴────────┴────────┴──────────┘ │ │
│ │                                                         │ │
│ │ [查看详情] [导出报告] [发送通知]                         │ │
│ └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

## 三、路由配置

```typescript
// frontend/src/router/modules/schoolCatalogConfig.ts
export default {
  path: '/school-catalog-config',
  component: () => import('@/layouts/DefaultLayout.vue'),
  meta: { 
    title: '学校目录配置', 
    icon: 'Setting',
    requiresAuth: true 
  },
  children: [
    {
      path: 'my-config',
      name: 'MyCatalogConfig',
      component: () => import('@/views/school-catalog/MyCatalogConfig.vue'),
      meta: {
        title: '我的目录配置',
        keepAlive: true,
        permission: ['school_experiment_catalog.view', 'school_experiment_catalog.config']
      }
    },
    {
      path: 'subordinate-assignment',
      name: 'SubordinateAssignment', 
      component: () => import('@/views/school-catalog/SubordinateAssignment.vue'),
      meta: {
        title: '下级目录指定',
        keepAlive: true,
        permission: 'school_experiment_catalog.assign'
      }
    },
    {
      path: 'completion-statistics',
      name: 'CompletionStatistics',
      component: () => import('@/views/school-catalog/CompletionStatistics.vue'),
      meta: {
        title: '完成率统计',
        keepAlive: true,
        permission: 'school_experiment_catalog.completion_stats'
      }
    }
  ]
}
```

## 四、组件设计要点

### 4.1 响应式设计
- 支持桌面端和平板端访问
- 表格支持横向滚动
- 图表自适应屏幕尺寸

### 4.2 交互体验
- 实时数据更新
- 操作确认提示
- 加载状态显示
- 错误处理提示

### 4.3 权限控制
- 按钮级别的权限控制
- 数据级别的权限过滤
- 动态菜单显示

### 4.4 数据可视化
- 使用 ECharts 进行图表展示
- 支持多种图表类型切换
- 数据导出功能

这个设计方案充分考虑了不同用户角色的需求，提供了清晰的功能分离和直观的用户界面。
