# v3.0 智能实验预约系统测试指南

## 📋 测试概述
- **测试版本**：v3.0 - 智能实验预约系统
- **测试目标**：验证智能预约系统的功能完整性和稳定性
- **测试环境**：开发环境/测试环境
- **测试时间**：建议2-3天完成全面测试

## 🧪 功能测试清单

### 1. 智能预约创建功能
#### 测试用例1.1：基础预约创建
- [ ] 选择实验目录，验证自动填充实验信息
- [ ] 选择实验室，验证容量限制检查
- [ ] 设置预约时间，验证时间格式和逻辑
- [ ] 输入班级和学生人数，验证数据有效性
- [ ] 提交预约，验证创建成功

#### 测试用例1.2：器材需求自动配置
- [ ] 验证根据学生人数自动计算器材数量
- [ ] 检查器材库存充足性提示
- [ ] 验证器材不足时的警告信息
- [ ] 测试个性化调整器材数量功能

#### 测试用例1.3：冲突检测功能
- [ ] 创建时间冲突的预约，验证冲突提示
- [ ] 测试教师时间冲突检测
- [ ] 验证实验室容量超限提示
- [ ] 检查设备借用冲突检测

### 2. 课表可视化界面
#### 测试用例2.1：周视图功能
- [ ] 切换到周视图，验证课表正确显示
- [ ] 检查不同状态预约的颜色区分
- [ ] 验证预约信息的完整显示
- [ ] 测试点击空白时段快速预约

#### 测试用例2.2：月视图功能
- [ ] 切换到月视图，验证日历显示
- [ ] 检查每日预约数量统计
- [ ] 验证点击日期查看详情功能
- [ ] 测试月份切换功能

#### 测试用例2.3：交互操作
- [ ] 点击预约块查看详情
- [ ] 测试预约状态修改功能
- [ ] 验证实时数据更新
- [ ] 检查响应式布局适配

### 3. 设备借用关联功能
#### 测试用例3.1：自动借用创建
- [ ] 预约确认后验证自动生成借用记录
- [ ] 检查借用数量与需求清单一致性
- [ ] 验证借用状态正确设置
- [ ] 测试借用记录与预约的关联

#### 测试用例3.2：借用状态同步
- [ ] 修改预约时验证借用记录同步更新
- [ ] 取消预约时检查借用记录处理
- [ ] 验证设备状态实时更新
- [ ] 测试借用归还流程

### 4. 实验作品管理
#### 测试用例4.1：文件上传功能
- [ ] 上传图片文件，验证格式支持
- [ ] 上传视频文件，检查大小限制
- [ ] 上传文档文件，验证类型识别
- [ ] 测试批量上传功能

#### 测试用例4.2：作品管理功能
- [ ] 验证作品分类和筛选
- [ ] 测试质量评分功能
- [ ] 检查教师评语功能
- [ ] 验证精选作品设置

#### 测试用例4.3：作品展示功能
- [ ] 验证缩略图生成
- [ ] 测试作品预览功能
- [ ] 检查下载功能
- [ ] 验证分享功能

### 5. 个人实验档案
#### 测试用例5.1：统计数据准确性
- [ ] 验证总预约数统计
- [ ] 检查完成率计算
- [ ] 验证作品数量统计
- [ ] 测试各项指标的准确性

#### 测试用例5.2：趋势分析功能
- [ ] 验证完成率趋势图显示
- [ ] 检查时间范围筛选
- [ ] 测试数据钻取功能
- [ ] 验证图表交互功能

#### 测试用例5.3：数据导出功能
- [ ] 测试Excel格式导出
- [ ] 验证导出数据完整性
- [ ] 检查文件命名规范
- [ ] 测试大数据量导出性能

### 6. 批量预约管理
#### 测试用例6.1：批量创建功能
- [ ] 测试模板预约创建
- [ ] 验证批量时间安排
- [ ] 检查冲突批量检测
- [ ] 测试批量提交功能

#### 测试用例6.2：审核流程
- [ ] 验证审核权限控制
- [ ] 测试批量审核功能
- [ ] 检查审核状态流转
- [ ] 验证审核通知功能

## 🚀 性能测试

### 数据库性能测试
```sql
-- 测试大量预约数据查询性能
SELECT COUNT(*) FROM experiment_reservations WHERE reservation_date BETWEEN '2025-01-01' AND '2025-12-31';

-- 测试冲突检测查询性能
EXPLAIN SELECT * FROM experiment_reservations 
WHERE laboratory_id = 1 AND reservation_date = '2025-01-15' 
AND ((start_time <= '09:00' AND end_time > '08:00') OR (start_time < '10:00' AND end_time >= '09:00'));

-- 测试作品查询性能
SELECT COUNT(*) FROM experiment_works WHERE created_at >= '2025-01-01';
```

### API接口性能测试
```bash
# 测试智能预约创建接口
curl -X POST http://localhost:8000/api/smart-reservations/create \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{"catalog_id":1,"laboratory_id":1,"reservation_date":"2025-01-15","start_time":"08:00","end_time":"09:40","class_name":"测试班级","student_count":30}'

# 测试课表查询接口
curl -X GET "http://localhost:8000/api/smart-reservations/laboratories/1/schedule?date_start=2025-01-15&date_end=2025-01-21" \
  -H "Authorization: Bearer YOUR_TOKEN"

# 测试冲突检测接口
curl -X POST http://localhost:8000/api/smart-reservations/check-conflicts \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{"laboratory_id":1,"reservation_date":"2025-01-15","start_time":"08:00","end_time":"09:40","student_count":30}'
```

### 前端性能测试
- [ ] 课表页面加载时间（目标：<2秒）
- [ ] 大量预约数据渲染性能
- [ ] 文件上传进度和速度
- [ ] 图表渲染性能测试

## 🔧 兼容性测试

### 浏览器兼容性
- [ ] Chrome 最新版本
- [ ] Firefox 最新版本  
- [ ] Safari 最新版本
- [ ] Edge 最新版本
- [ ] 移动端浏览器

### 分辨率适配测试
- [ ] 1920x1080 (桌面)
- [ ] 1366x768 (笔记本)
- [ ] 768x1024 (平板)
- [ ] 375x667 (手机)

### 操作系统兼容性
- [ ] Windows 10/11
- [ ] macOS
- [ ] Linux (Ubuntu)
- [ ] iOS Safari
- [ ] Android Chrome

## 🐛 常见问题排查

### 数据库相关问题
1. **迁移失败**
   ```bash
   php artisan migrate:status
   php artisan migrate --force
   ```

2. **索引缺失**
   ```sql
   SHOW INDEX FROM experiment_reservations;
   ```

### API接口问题
1. **认证失败**
   - 检查Token是否有效
   - 验证用户权限设置

2. **数据验证错误**
   - 检查请求参数格式
   - 验证必填字段完整性

### 前端界面问题
1. **页面加载缓慢**
   - 检查网络请求数量
   - 验证图片资源大小

2. **响应式布局问题**
   - 检查CSS媒体查询
   - 验证Element Plus组件配置

## ✅ 测试完成标准

### 功能测试通过标准
- [ ] 所有核心功能正常运行
- [ ] 数据准确性100%验证通过
- [ ] 用户交互流程顺畅
- [ ] 错误处理机制完善

### 性能测试通过标准
- [ ] 页面加载时间 < 3秒
- [ ] API响应时间 < 1秒
- [ ] 文件上传成功率 > 95%
- [ ] 并发用户支持 > 100人

### 兼容性测试通过标准
- [ ] 主流浏览器兼容性 100%
- [ ] 移动端适配良好
- [ ] 不同分辨率显示正常

## 📝 测试报告模板

### 测试结果记录
```
测试日期：2025-07-XX
测试人员：XXX
测试环境：开发环境/生产环境

功能测试结果：
- 智能预约创建：✅ 通过 / ❌ 失败
- 课表可视化：✅ 通过 / ❌ 失败  
- 设备借用关联：✅ 通过 / ❌ 失败
- 作品管理：✅ 通过 / ❌ 失败
- 个人档案：✅ 通过 / ❌ 失败

发现问题：
1. 问题描述
2. 重现步骤
3. 预期结果
4. 实际结果

建议：
1. 优化建议
2. 功能改进建议
```

---

**测试完成后**，如果所有功能都正常运行，即可开始下一步开发。请参考 `docs/NEXT_DEVELOPMENT_PLAN.md` 进行后续开发规划。
